@model Resource
@{
    ViewData["Title"] = "Edit Resource";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<h2 class="mb-4">@ViewData["Title"]</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div id="successMsg" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle me-2"></i>@TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
@*       ==================================== edit resourch form ==================================================== *@
<div class="card shadow-sm p-4 mb-4 bg-light">
    <form asp-action="EditResource" method="post" class="needs-validation" novalidate>
        <input type="hidden" asp-for="Id" />


        <div class="mb-3">
            <label asp-for="Name" class="form-label fw-bold">
                <i class="fas fa-tag text-primary me-2"></i>Name <span class="text-danger">*</span>
            </label>
            <input asp-for="Name" class="form-control" required />
            <span asp-validation-for="Name" class="text-danger small"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Description" class="form-label fw-bold">
                <i class="fas fa-align-left text-primary me-2"></i>Description <span class="text-danger">*</span>
            </label>
            <textarea asp-for="Description" class="form-control" rows="3" required></textarea>
            <span asp-validation-for="Description" class="text-danger small"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Location" class="form-label fw-bold">
                <i class="fas fa-map-marker-alt text-primary me-2"></i>Location <span class="text-danger">*</span>
            </label>
            <input asp-for="Location" class="form-control" required />
            <span asp-validation-for="Location" class="text-danger small"></span>
        </div>


        <div class="mb-3">
            <label asp-for="Capacity" class="form-label fw-bold">
                <i class="fas fa-users text-primary me-2"></i>Capacity <span class="text-danger">*</span>
            </label>
            <input asp-for="Capacity" type="number" min="1" class="form-control" required />
            <span asp-validation-for="Capacity" class="text-danger small"></span>
        </div>

        <div class="form-check form-switch mb-4">
            <input asp-for="IsAvailable" class="form-check-input" type="checkbox" id="IsAvailable" />
            <label asp-for="IsAvailable" class="form-check-label fw-bold" for="IsAvailable">
                <i class="fas fa-check-circle text-primary me-2"></i>Available for Booking
            </label>
            <span asp-validation-for="IsAvailable" class="text-danger small"></span>
        </div>

        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-success">
                <i class="fas fa-save me-2"></i>Save Changes
            </button>
            <a asp-action="ResourceList" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i>Back to List
            </a>
        </div>
    </form>
</div>
@*       ==================================== edit resourch form ==================================================== *@
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        (() => {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach((form) => {
                form.addEventListener('submit', (event) => {
                    if (!form.checkValidity()) {
                        event.preventDefault();//======= stop a form from submitting, prevent a link from navigating==============
                        event.stopPropagation();   // =======prevent the submit button from triggering other events===============
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();

        const successMsg = document.getElementById('successMsg');
        if (successMsg) {
            setTimeout(() => {
   
                successMsg.classList.remove("show");
    
            }, 1000);

            setTimeout(() => {
              
                window.location.href = '@Url.Action("ResourceList", "Home")';
            }, 1100);  
        }

    </script>
}
