@model HomeViewModel
@{
    ViewData["Title"] = "Home";
}
@*===================================================== style========================================================= *@
@*===================================================== style========================================================= *@
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
    .content-wrapper {
        background-color: #f8fafc; 
    }

     .homepage-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }
    .card {
        transition: transform 0.2s, box-shadow 0.2s;
        border: none;
        border-radius: 10px;
        background-color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

    .icon-pulse {color: #3b82f6; }
    .text-primary {color: #3b82f6 !important;}
    .text-secondary {color: #6b7280 !important; }
    .text-success {color: #10b981 !important;}
 
    .text-info {color: #06b6d4 !important;
}

    .text-warning { color: #f59e0b !important; }

    .table {
        background-color: #ffffff;
        border-radius: 8px;
        overflow: hidden;
    }
   .table thead {background-color: #f1f5f9; }

    .table-hover tbody tr:hover { background-color: #f1f5f9; }

    .btn-primary {
        background-color: #3b82f6;
        border-color: #3b82f6;
    }
        .btn-primary:hover { background-color: #2563eb;
            border-color: #2563eb; }
</style>
@*===================================================== style========================================================= *@
@*===================================================== style========================================================= *@






<div class="content-wrapper">
    <div class="homepage-container">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold">
                <i class="fas fa-calendar-alt icon-pulse me-2"></i>
                Resource Booking System
            </h1>
          @*   <p class="lead text-secondary">Manage and schedule your resources.</p> *@
        </div>

        <div class="row g-4">
            <div class="col-12 col-md-3">
                <div class="card h-100 text-center p-4">
                    <i class="fas fa-box fa-2x text-info mb-2"></i>
                    <h6>Total Resources</h6>
                    <h4 class="text-primary">@Model.TotalResources</h4>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <div class="card h-100 text-center p-4">
                    <i class="fas fa-book fa-2x text-primary mb-2"></i>
                    <h6>Total Bookings</h6>
                    <h4 class="text-primary">@Model.TotalBookings</h4>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <div class="card h-100 text-center p-4">
                    <i class="fas fa-calendar-day fa-2x text-success mb-2"></i>
                    <h6>Today's Bookings</h6>
                    <h4 class="text-primary">@Model.BookingsToday</h4>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <div class="card h-100 text-center p-4">
                    <i class="fas fa-clock fa-2x text-warning mb-2"></i>
                    <h6>Current Time</h6>
                    <h4 class="text-primary">@DateTime.Now.ToString("HH:mm:ss")</h4>
                </div>
            </div>
        </div>
        
        @{
            //============================================================================
            // Filter bookings for today only
            // Sort by start time ascending
            // Limit to first 3 bookings
            // Filter only those bookings where the start time is today
            //====================================================================================
            var today = DateOnly.FromDateTime(DateTime.Now);

            var todaysBookings = Model.RecentBookings
            .Where(b => DateOnly.FromDateTime(b.StartTime) >= today && DateOnly.FromDateTime(b.EndTime) <= today) 
            .OrderBy(b => b.StartTime)                               
                                                        
            .ToList().Take(3);
            
        }

         @*===================================================== table========================================================= *@
                     @* Name of the booked resource (e.g., room or equipment) *@
                     @* Who made the booking *@
                     @* Date of the booking (e.g., 15 Jul 2025) *@
                     @* Time range of the booking (e.g., 13:00 - 14:00) *@
        @*===================================================== table========================================================= *@
       <div class="mt-5">
    <h5 class="mb-3 fw-bold text-primary">
        <i class="fas fa-calendar-day me-2"></i>Today's Bookings
    </h5>

    @if (todaysBookings.Any())
    {
        <table class="table table-hover table-bordered">
            <thead class="bg-primary text-white">
                <tr>
                    <th><i class="fas fa-box me-1"></i> Resource</th>
                    <th><i class="fas fa-user me-1"></i> User</th>
                    <th><i class="fas fa-calendar-alt me-1"></i> Date</th>
                    <th><i class="fas fa-clock me-1"></i> Time</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var booking in todaysBookings)
                {
                    <tr>
                        <td>@booking.Resource?.Name</td>
                        <td>@booking.BookedBy</td>
                        <td>@booking.StartTime.ToString("dd MMM yyyy")</td>
                        <td>@($"{booking.StartTime:HH:mm} - {booking.EndTime:HH:mm}")</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-secondary"><i class="fas fa-info-circle me-1"></i> No bookings for today.</p>
    }
</div>



    </div>
</div
@*===================================================== table========================================================= *@